Works with SF and FF, not with CC, OP
http://www.theregister.co.uk/2015/11/05/talktalk_offers_customer_30gbp_final_settlement_after_crims_nick_3500gbp/

Popup won't work on CC with
http://localhost/prices.html


Uncaught TypeError: Identifier 'PriceRegexes' has already been declared
Uncaught TypeError: Identifier 'DccFunctions' has already been declared
Uncaught TypeError: Identifier 'ContentAdapter' has already been declared

Identifier has already been declared


  "content_scripts": [
    {
      "matches": ["http://*/*"],
      "js": ["common/dcc-regexes.js", "common/dcc-content.js", "dcc-chrome-content-adapter.js"]
    }
  ],


*/


    /*
    const defaultEnabledCurrencies = [new EnabledCurrency("SEK", true), new EnabledCurrency("CHF", true), new EnabledCurrency("DKK", true), new EnabledCurrency("EUR", true), new EnabledCurrency("GBP", true), new EnabledCurrency("ISK", true), new EnabledCurrency("JPY", true), new EnabledCurrency("NOK", true), new EnabledCurrency("RUB", true), new EnabledCurrency("USD", true)];
    defaultEnabledCurrencies2.map(function(a, b, c) {
        // object
        console.log(a.isoName + " " + a.enabled);
        // index
        console.log(b);
        // array
        console.log(c);
    });
    for (var d of defaultEnabledCurrencies2) {
        // object
        console.log(d.isoName + " " + d.enabled);
    }
    for (var e in defaultEnabledCurrencies2) {
        // index
        console.log(e);
    }
*/



enableOnStart is not set but defaults to true, since a callback is used in Chrome
    aStorageService.init(defaultEnabledCurrencies, _excludedDomains);
    var conversionEnabled = aStorageService.enableOnStart;

Please fix:
Error in event handler for runtime.onMessage: TypeError: Cannot read property 'convertToCurrency' of undefined
gc-storage-service.js:97 - return storage.dccPrefs.convertToCurrency;

Check correct settings in settings page.
Make changes show without reload

User reported problem.
http://tw.taobao.com/category/53984029/x.htm?cat=53596015&sort=_deal&_ksTS=1430432898161_356&spm=a213z.1224559.20150331F102.21.p9n32F&json=on&cna=ZA%2FEDaPtp0ECAdyFtMk42Nws&module=filterForm&_input_charset=utf-8&_lang=zh_CN%3ATB-GBK&s=0&navigator=all&callback=__jsonp_cb&abtest=_AB-LR492-LR501-LR517-PR492-PR501-PV517_1273

// Errors in log:
Unchecked runtime.lastError while running tabs.executeScript: The tab was closed.
    at sendSettingsToPage (chrome-extension://kibpfmdkiobllanckdbmhgljndjacoma/gc-contentInterface.js:66:25)reportIfUnchecked @ extensions::lastError:133handleResponse @ extensions::sendRequest:78
extensions::lastError:133 Unchecked runtime.lastError while running tabs.executeScript: No tab with id: 37.
    at Object.callback (chrome-extension://kibpfmdkiobllanckdbmhgljndjacoma/gc-contentInterface.js:67:29)reportIfUnchecked @ extensions::lastError:133handleResponse @ extensions::sendRequest:78
extensions::lastError:133 Unchecked runtime.lastError while running tabs.executeScript: No tab with id: 37.
    at Object.callback (chrome-extension://kibpfmdkiobllanckdbmhgljndjacoma/gc-contentInterface.js:68:33)reportIfUnchecked @ extensions::lastError:133handleResponse @ extensions::sendRequest:78
Unchecked runtime.lastError while running tabs.executeScript: Cannot access contents of url "chrome-search://local-ntp/local-ntp.html". Extension manifest must request permission to access this host.
    at sendSettingsToPage (chrome-extension://kibpfmdkiobllanckdbmhgljndjacoma/gc-contentInterface.js:66:25)reportIfUnchecked @ extensions::lastError:133handleResponse @ extensions::sendRequest:78
extensions::lastError:133 Unchecked runtime.lastError while running tabs.executeScript: Cannot access contents of url "chrome-search://local-ntp/local-ntp.html". Extension manifest must request permission to access this host.
    at Object.callback (chrome-extension://kibpfmdkiobllanckdbmhgljndjacoma/gc-contentInterface.js:67:29)reportIfUnchecked @ extensions::lastError:133handleResponse @ extensions::sendRequest:78
extensions::lastError:133 Unchecked runtime.lastError while running tabs.executeScript: Cannot access contents of url "chrome-search://local-ntp/local-ntp.html". Extension manifest must request permission to access this host.
    at Object.callback (chrome-extension://kibpfmdkiobllanckdbmhgljndjacoma/gc-contentInterface.js:68:33)reportIfUnchecked @ extensions::lastError:133handleResponse @ extensions::sendRequest:78

Link to test page at joint.ax

tile images
Small tile - 440x280: (optional)
Large tile - 920x680: (optional)
Marquee - 1400x560: (optional)


Chrome API used
chrome.browserAction.onClicked.addListener
    Since Chrome 5.
chrome.i18n.getMessage
    Since Chrome 5.
chrome.runtime.getURL
chrome.runtime.onMessage.addListener
    Since Chrome 22.
chrome.runtime.onConnect.addListener
chrome.runtime.sendMessage
    Since Chrome 26.
chrome.storage.local.get
chrome.storage.local.set
    Since Chrome 20.
chrome.tabs.connect
chrome.tabs.executeScript
chrome.tabs.onCreated.addListener
    Since Chrome 5.
chrome.tabs.query
    Since Chrome 5.



/Users/per/Library/Application Support/Google/Chrome/Default/Extensions/hgdfddnhgpincbchioebogaljemgkpgl
/Users/per/Library/Application Support/Google/Chrome/Default/IndexedDB/chrome-extension_hgdfddnhgpincbchioebogaljemgkpgl_0.indexeddb.leveldb
/Users/per/Library/Application Support/Google/Chrome/Default/Local Extension Settings/hgdfddnhgpincbchioebogaljemgkpgl


ls -R "/Users/per/Library/Application Support/Google/Chrome/Default/Extensions/hgdfddnhgpincbchioebogaljemgkpgl"

ls -R "/Users/per/Library/Application Support/Google/Chrome/Default/Extensions/anbfhidldjknonaihbalghlebaijealk"
